name: VoltAir Supreme Continuous Execution ‚ö°üîí

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  supreme-execution:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'

      - name: Validate VoltAir ZIP exists
        run: |
          if [ ! -f "voltair-supreme-repo.zip" ]; then
            echo "‚ùå voltair-supreme-repo.zip not found!"
            exit 1
          fi
          echo "‚úÖ ZIP found."

      - name: Unpack VoltAir ZIP
        run: |
          unzip -o voltair-supreme-repo.zip -d voltair-supreme
          echo "‚úÖ Unpacked to ./voltair-supreme"

      - name: Validate Required Files
        run: |
          REQUIRED_FILES=("index.html" "main.js" "config.json")
          for f in "${REQUIRED_FILES[@]}"; do
            if [ ! -f "./voltair-supreme/$f" ]; then
              echo "‚ùå Missing required file: $f"
              exit 1
            fi
          done
          echo "‚úÖ All required files present."

      - name: Install Dependencies
        run: |
          cd voltair-supreme
          if [ -f package.json ]; then
            npm install
            echo "‚úÖ Dependencies installed."
          else
            echo "‚ö†Ô∏è No package.json found, skipping npm install."
          fi

      - name: Run VoltAir Supreme Execution
        run: |
          cd voltair-supreme
          if [ -f main.js ]; then
            node main.js
            echo "‚ö° VoltAir Supreme executed successfully!"
          else
            echo "‚ùå main.js missing, cannot execute!"
            exit 1
          fi
